@page "/"
@attribute [OutputCache(Duration = 10)]
@using OpenFeature
@using OpenFeature.Model
@inject IFeatureClient FeatureClient

<PageTitle>Home</PageTitle>

@if (_isEnglishLanguageEnabled == true)
{
    <h1>Hello, world!</h1>
    <p>Welcome to your new app.</p>
}
else
{
    <h1>Olá, mundo!</h1>
    <p>Bem-vindo à tua nova aplicação.</p>
}

@code {
    private bool? _isEnglishLanguageEnabled;

    protected override async Task OnInitializedAsync()
    {
        var builder = EvaluationContext.Builder();
        builder.Set("speaker", "pt");
        var context = builder.Build();

        _isEnglishLanguageEnabled = await FeatureClient.GetBooleanValueAsync("english-language", true, context);
    }
}
